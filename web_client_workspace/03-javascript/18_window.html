<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>window</title>
</head>
<body>
    <h1>window</h1>
    <!-- 
        window 객체
        - 웹페이지의 모든 자원을 관리하는 최상위 객체
        - window, this, globalThis 등을 통해 접근 가능.
        - BOM Browser Object Model (navigator, location, history, screen, frames, ...)
        - DOM Document Object Model (document)
        - JavaScript (String, Number, Object, ...)
     -->
    <h2>open(pop-up)</h2>
    <button onclick="test1();">실행</button>
    <script>
    /**
     * open(path, name(target), spec)
     * - 새 윈도우(탭, 팝업)을 여는 메소드
     * - path : 오픈할 파일 주소
     * - name(target) : 새 윈도우 객체의 이름(_self인 경우 현재  탭에 오픈, '' / '_blank'인 경우 새 탭에 오픈)
     * - spec : 팝업창의 크기 / 위치에 대한 정보 - 생략가능 
     */
    const test1 = () => {
        const popup = open('index.html', 'myPopup', 'width=500px, height=500px, left=300px, top=300px');
        console.log(popup);
        setTimeout(() => {
            // popup.alert(123);
            popup.close();
        }, 3000);
    };
    </script>
    <h2>Timer api</h2>
    <button onclick="test2();">timeout 실행</button>
    <button onclick="clearTimeout(timeoutId);">timeout 취소</button>

    <button onclick="test3()">interval 실행</button>
    <button onclick="clearInterval(intervalId)">interval 취소</button>

    <button onclick="test4();">@실습문제 - 카운트다운</button>
    <h3 id="countDown">10</h3>

    <script>
    /**
     * setTimeout(f, millis)
     * clearTimeout(timeoutId)
     */
    let timeoutId;
    const test2 = () => {
        const f = () => {
            alert("Hello world!!!!!!");
        };
        timeoutId = setTimeout(f, 2000);
        console.log(timeoutId);
        // clearTimeout(timeoutId); // setTimeout 취소
    };  

    /**
     * setInterval(f, millis)
     * - millis초 이후 millis초 간격으로 f 실행
     * clearInterval(intervalId)
     */
    let intervalId;
    const test3 = () => {
        let num = 0;
        intervalId = setInterval(() => {
            num++;
            console.log(num);
        }, 1000);
        console.log(intervalId);
    };

    /**
     * @실습문제 - #contDown 10 9 8 ... 1 0 중지
     */
    const test4 = () => {
        // 내 풀이
        // let num = Number(document.getElementById("countDown").innerText);
        // intervalId = setInterval(() => {
        //     num -= 1;
        //     document.querySelector("#countDown").innerHTML = num;
        //     if (num == 0) {
        //         clearInterval(intervalId);
        //         document.body.style.backgroundColor = "red";
        //         document.body.style.color = "#fff";
        //     }
        // }, 1000);

        let val = parseInt(countDown.innerHTML);
        const intervalId = setInterval(() => {
            countDown.innerHTML = --val;
            if (val == 0) {
                clearInterval(intervalId);
                document.body.style.backgroundColor = "red";
                document.body.style.color = "#fff";
            }
        }, 1000);
    };
    </script>

    <h2>BOM</h2>
    <h3>navigator</h3>
    <button onclick="test5();">실행</button>
    <script>
    
    /**
     * navigator
     * - browser에 대한 정보를 가진 객체
     * - userAgent
     */
     const test5 = () => {
        console.log(navigator);
        console.log(navigator.userAgent); // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36
    };
    </script>

    <h3>location</h3>
    <button onclick="test6();">실행</button>
    <button onclick="location.href='https://naver.com';">페이지 이동</button>
    <button onclick="location.reload();">새로고침</button>
    <script>
    /**
     * location
     * - browser 주소창 관련 정보를 가진 객체
     * - href, protocol, hostname, port, origin, pathname, search, hash
     */
    const test6 = () => {
        console.log(location);
    };
    </script>

    <h3>history</h3>
    <button onclick="test7();">실행</button>
    <button onclick="history.back();">뒤로가기</button>
    <button onclick="history.forward();">앞으로가기</button>
    <button onclick="history.go(prompt('이동할 수를 입력하세요.', 0));">이동</button>
    <script>
    /**
     * history
     * - 방문기록 관련 정보를 가진 객체
     */
    const test7 = () => {
        console.log(history);   
    };
    </script>

    <h3>screen</h3>
    <button onclick="test8();">실행</button>
    <script>
    /**
     * screen
     * - 브라우져가 아닌 사용중인 모니터(h.w)에 관한 정보를 가진 객체
     * - height, width, availHeight, availWidth
     */
    const test8 = () => {
        console.log(screen);
        
        const w = 300, h = 300;
        const {width, height, availWidth, availHeight, availTop} = screen;
        const left = (width-w)/2;
        const top = (height-h)/2;
        open('index.html', '', `width=${w}px, height=${h}px, left=${left}px, top=${top}px`)


    };
    </script>
</body>
</html>